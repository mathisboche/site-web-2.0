<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>yo, t'es grillé.</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        p {
            font-size: 16px;
            line-height: 1.5;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>yo. t'es grillé.</h1>
    <div id="results">
        <!-- les résultats apparaîtront ici -->
    </div>

    <script>
        // fonction pour ajouter une info dans les résultats
        function addResult(content) {
            const resultsDiv = document.getElementById('results');
            const p = document.createElement('p');
            p.textContent = content;
            resultsDiv.appendChild(p);
        }

        // fonction pour récupérer les infos IP + région
        fetch('https://ipapi.co/json/')
            .then(res => res.json())
            .then(data => {
                const ip = data.ip || 'inconnue';
                const region = data.region || 'quelque part';

                const isMobile = /Mobile|Android|iP(hone|ad)/i.test(navigator.userAgent);

                // commentaire sur l'ip
                let ipComment = isMobile
                    ? "ton tel laisse ton ip traîner comme un mégot."
                    : "ton ip est publique. bien joué, sherlock.";
                if (ip.startsWith("192.") || ip.startsWith("10.")) {
                    ipComment = isMobile
                        ? "wifi local ? ça sent l'hôtel ou le café du coin."
                        : "ip privée. tu bosses sur du réseau local, ou t'es perdu ?";
                } else if (ip.startsWith("127.")) {
                    ipComment = "loopback ? t'as un problème avec toi-même ?";
                } else if (!ip) {
                    ipComment = "pas d'ip détectée... vpn activé ? ou juste malin ?";
                }

                // commentaire sur la région
                let regionComment = isMobile
                    ? `t'es là, à ${region}. t'es perdu ou t'attends quelqu'un ?`
                    : `posé à ${region}. chill ou en stress ?`;
                if (region.toLowerCase().includes("paris")) {
                    regionComment = "paris. coincé dans les bouchons ? classique.";
                } else if (region.toLowerCase().includes("normandie")) {
                    regionComment = "normandie. il pleut ? c'est chill.";
                } else if (!region) {
                    regionComment = "région inconnue. ninja détecté.";
                }

                addResult(`j'ai trouvé ton ip ${ip}. ${ipComment}`);
                addResult(`t'es probablement dans la région ${region}. ${regionComment}`);
            })
            .catch(() => {
                addResult("impossible de récupérer ton ip et ta localisation. malin, mais pas assez.");
            });

        // fonction pour afficher les autres infos
        function loadDeviceInfo() {
            const isMobile = /Mobile|Android|iP(hone|ad)/i.test(navigator.userAgent);

            // détecter le navigateur
            const userAgent = navigator.userAgent;
            let browser = "inconnu";
            if (userAgent.includes("Chrome")) browser = "Chrome";
            else if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
            else if (userAgent.includes("Edge")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";

            let browserComment = isMobile
                ? `t'as ${browser} sur ton tel. bon choix, ou pas ?`
                : `${browser} sur ton pc. classique, mais t'as rien de mieux ?`;
            if (browser === "Firefox") {
                browserComment = "firefox, hein ? respect.";
            } else if (browser === "Edge") {
                browserComment = "edge... microsoft te tient à la gorge ?";
            }

            // détecter l'os
            let os = "inconnu";
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac")) os = "macOS";
            else if (userAgent.includes("Linux")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";

            let osComment = isMobile
                ? `ton tel tourne sous ${os}. ça passe.`
                : `ton pc est sur ${os}. bon choix ? on verra.`;
            if (os === "Linux") {
                osComment = "linux. laisse-moi deviner : t'as un serveur dans le salon ?";
            } else if (os === "Windows") {
                osComment = "windows... laisse-moi deviner : t'as encore forcé une mise à jour ?";
            }

            addResult(`tu utilises ${browser} sur ${os}. ${browserComment} ${osComment}`);

            // détecter la langue
            const lang = navigator.language || "inconnue";
            const langMap = {
                "fr": "français",
                "en": "anglais",
                "es": "espagnol",
                "de": "allemand",
                "it": "italien",
                "zh": "chinois",
                "ja": "japonais",
                "ru": "russe",
                "ar": "arabe"
            };
            const shortLang = lang.split('-')[0];
            const language = langMap[shortLang] || "un truc chelou";

            let langComment = isMobile
                ? `ta langue c'est ${language}, sur tel. logique.`
                : `${language} sur pc. molière est fier.`;
            if (shortLang === "zh") {
                langComment = "chinois ? impressionnant, mais pourquoi ?";
            } else if (shortLang === "ru") {
                langComment = "russe. vodka time ?";
            }

            addResult(`je vois que tu parles ${language}. ${langComment}`);

            // détecter la résolution
            const resolution = `${window.screen.width} x ${window.screen.height}`;
            let resolutionComment = isMobile
                ? "petit écran, mais c'est un tel. ça passe."
                : "grande résolution. gamer ou juste blindé ?";
            if (window.screen.width < 1280) {
                resolutionComment = isMobile
                    ? "écran minuscule. t'as un nokia 3310 ou quoi ?"
                    : "pc avec petit écran. upgrade, sérieux.";
            }

            addResult(`ton écran fait ${resolution}. ${resolutionComment}`);

            // détecter la connexion
            const connection = navigator.connection?.effectiveType || "inconnue";
            let connectionComment = isMobile
                ? `${connection} sur tel. ça galère, non ?`
                : `${connection} sur pc. sérieux ou amateur ?`;
            if (connection === "wifi") {
                connectionComment = "wifi. ça fait le taf.";
            } else if (connection === "ethernet") {
                connectionComment = "ethernet. pro setup ? ou gamer frustré ?";
            }

            addResult(`et ta connexion ? ${connection}. ${connectionComment}`);
        }

        // charger les infos locales
        loadDeviceInfo();
    </script>
</body>
</html>
