<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>yo, t'es grillé.</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        p {
            font-size: 16px;
            line-height: 1.5;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>yo. t'es grillé.</h1>
    <div id="results">
        <!-- les résultats apparaîtront ici -->
    </div>

    <script>
        // fonction pour ajouter une info dans les résultats
        function addResult(content) {
            const resultsDiv = document.getElementById('results');
            const p = document.createElement('p');
            p.textContent = content;
            resultsDiv.appendChild(p);
        }

        // détecter mobile vs pc
        function isMobileDevice() {
            return /Mobile|Android|iP(hone|ad)/i.test(navigator.userAgent);
        }

        // récupérer l'ip via une api alternative
        function getIp() {
            return fetch('https://api64.ipify.org?format=json')
                .then(res => res.json())
                .then(data => data.ip || 'inconnue')
                .catch(() => 'impossible de récupérer l\'ip');
        }

        // récupérer localisation et ipapi si disponible
        function getLocation() {
            return fetch('https://ipapi.co/json/')
                .then(res => res.json())
                .catch(() => ({ region: 'inconnue' }));
        }

        // afficher les infos ip et région
        async function displayIpAndRegion() {
            const ip = await getIp();
            const location = await getLocation();

            const region = location.region || 'inconnue';
            const isMobile = isMobileDevice();

            // commentaire ip
            let ipComment = isMobile
                ? `ton tel balance ton ip comme un clébard dans la rue : ${ip}`
                : `voilà ton ip sur pc : ${ip}. propre ou pas ?`;
            if (ip === 'impossible de récupérer l\'ip') {
                ipComment = "pas d'ip. vpn ou parano ? malin.";
            }

            // commentaire région
            let regionComment = region === 'inconnue'
                ? "localisation flinguée. bunker activé ?"
                : isMobile
                    ? `t'es là, dans ${region}. tu fuis ou c'est ton coin ?`
                    : `posé à ${region}. chill ou boulot ?`;
            if (region.toLowerCase().includes("paris")) {
                regionComment = "paris, ville lumière ? ou juste embouteillages ?";
            } else if (region.toLowerCase().includes("normandie")) {
                regionComment = "normandie. laisse-moi deviner : pluie.";
            }

            addResult(ipComment);
            addResult(regionComment);
        }

        // afficher les autres infos
        function displayDeviceInfo() {
            const isMobile = isMobileDevice();

            // détecter navigateur
            const userAgent = navigator.userAgent;
            let browser = "inconnu";
            if (userAgent.includes("Chrome")) browser = "Chrome";
            else if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
            else if (userAgent.includes("Edge")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";

            let browserComment = isMobile
                ? `${browser} sur ton tel. chrome mobile ? ok, basique.`
                : `${browser} sur ton pc. on a vu mieux.`;
            if (browser === "Firefox") {
                browserComment = "firefox ? là, t'as du goût.";
            } else if (browser === "Edge") {
                browserComment = "edge ? microsoft te force la main ?";
            }

            // détecter os
            let os = "inconnu";
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac")) os = "macOS";
            else if (userAgent.includes("Linux") && !userAgent.includes("Android")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";

            let osComment = isMobile
                ? `${os} sur tel. ça tient le coup ?`
                : `${os} sur pc. classique. ou frustrant ?`;
            if (os === "Linux") {
                osComment = "linux ? ok geek confirmé.";
            } else if (os === "Windows") {
                osComment = "windows. encore des mises à jour forcées ?";
            }

            addResult(`tu utilises ${browser} sur ${os}. ${browserComment} ${osComment}`);

            // détecter langue
            const lang = navigator.language || "inconnue";
            const langMap = {
                "fr": "français",
                "en": "anglais",
                "es": "espagnol",
                "de": "allemand",
                "it": "italien",
                "zh": "chinois",
                "ja": "japonais",
                "ru": "russe",
                "ar": "arabe"
            };
            const shortLang = lang.split('-')[0];
            const language = langMap[shortLang] || "un truc chelou";

            let langComment = isMobile
                ? `ton tel parle ${language}. propre.`
                : `pc réglé en ${language}. molière est content.`;
            if (shortLang === "zh") {
                langComment = "chinois ? impressionnant, mais chelou.";
            } else if (shortLang === "ru") {
                langComment = "russe. laisse-moi deviner : vodka et hacking ?";
            }

            addResult(`je vois que tu parles ${language}. ${langComment}`);
        }

        // appeler les fonctions
        displayIpAndRegion();
        displayDeviceInfo();
    </script>
</body>
</html>
