<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>yo, t'es grillé.</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        p {
            font-size: 16px;
            line-height: 1.5;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>yo. t'es grillé.</h1>
    <div id="results">
        <!-- les résultats apparaîtront ici -->
    </div>

    <script>
        // fonction pour ajouter une info dans les résultats
        function addResult(content) {
            const resultsDiv = document.getElementById('results');
            const p = document.createElement('p');
            p.textContent = content;
            resultsDiv.appendChild(p);
        }

        // récupérer l'ip et la région en priorité
        fetch('https://ipapi.co/json/')
            .then(res => res.json())
            .then(data => {
                const ip = data.ip || 'inconnue';
                const region = data.region || 'quelque part';

                let ipComment = "c'est gentil de laisser ton ip traîner.";
                if (ip.startsWith("192.") || ip.startsWith("10.")) {
                    ipComment = "ta petite ip locale, c'est mignon.";
                } else if (ip.startsWith("172.")) {
                    ipComment = "utiliser une ip privée, ça t'aide pas ici.";
                } else {
                    ipComment = "avec ça, je peux te retrouver. ou presque.";
                }

                let regionComment = "ça a l'air sympa par là.";
                if (region.toLowerCase().includes("paris")) {
                    regionComment = "ah, Paris, toujours bloqué dans les bouchons ?";
                } else if (region.toLowerCase().includes("île-de-france")) {
                    regionComment = "région parisienne, hein ? t'as l'air patient.";
                } else if (region.toLowerCase().includes("normandie")) {
                    regionComment = "normandie, j'espère que t'aimes la pluie.";
                } else if (region === 'quelque part') {
                    regionComment = "mystère, t'as caché ça bien.";
                }

                // afficher ip et région
                addResult(`j'ai trouvé ton ip ${ip}. ${ipComment}`);
                addResult(`t'es probablement dans la région ${region}. ${regionComment}`);
            })
            .catch(() => {
                addResult("impossible de récupérer ton ip et ta localisation. malin, mais pas assez.");
            });

        // afficher les autres infos immédiatement
        function loadLocalInfo() {
            // récupérer le navigateur et l'os
            const userAgent = navigator.userAgent;
            let browser = "inconnu";
            if (userAgent.includes("Chrome")) browser = "Chrome";
            else if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
            else if (userAgent.includes("Edge")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";

            let os = "inconnu";
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac")) os = "macOS";
            else if (userAgent.includes("Linux")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";

            let deviceComment = "pas mal, mais y'a mieux.";
            if (browser === "Chrome" && os === "Windows") {
                deviceComment = "classique, mais t'as essayé un truc plus cool ?";
            } else if (browser === "Firefox") {
                deviceComment = "respect pour Firefox, t'es un vrai.";
            } else if (os === "Linux") {
                deviceComment = "ah, Linux ? le geek en toi est fier.";
            } else if (os === "Android" || os === "iOS") {
                deviceComment = "t'es sur ton tel, hein ?";
            }
            addResult(`tu utilises ${browser} sur ${os}. ${deviceComment}`);

            // récupérer la langue
            const lang = navigator.language || 'inconnue';
            const langMap = {
                "fr": "français",
                "en": "anglais",
                "es": "espagnol",
                "de": "allemand",
                "it": "italien",
                "zh": "chinois",
                "ja": "japonais",
                "ru": "russe",
                "ar": "arabe"
            };
            const shortLang = lang.split('-')[0];
            const language = langMap[shortLang] || 'un truc chelou';

            let languageComment = "cool, j'aime bien.";
            if (shortLang === "fr") {
                languageComment = "la langue de Molière, ça passe.";
            } else if (shortLang === "en") {
                languageComment = "anglais, basique mais efficace.";
            } else if (shortLang === "es") {
                languageComment = "espagnol ? viva la vida, non ?";
            } else if (shortLang === "zh") {
                languageComment = "chinois, impressionnant.";
            }
            addResult(`je vois que tu parles ${language}. ${languageComment}`);

            // récupérer la résolution d'écran
            const resolution = `${window.screen.width} x ${window.screen.height}`;
            let screenComment = "t'es bien équipé.";
            if (window.screen.width < 1280) {
                screenComment = "petit écran, faut penser à upgrader.";
            } else if (window.screen.width >= 1920) {
                screenComment = "écran large, le luxe.";
            }
            addResult(`ton écran fait ${resolution}. ${screenComment}`);

            // récupérer l'heure locale
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            let timeComment = "sérieux, t'as encore les yeux ouverts ?";
            if (hours >= 6 && hours < 9) {
                timeComment = "déjà debout ? Café en main, j'espère.";
            } else if (hours >= 9 && hours < 12) {
                timeComment = "au boulot ou tu fais semblant ?";
            } else if (hours >= 12 && hours < 14) {
                timeComment = "pause déjeuner, j'espère.";
            } else if (hours >= 14 && hours < 18) {
                timeComment = "t'es censé bosser là.";
            } else if (hours >= 18 && hours < 22) {
                timeComment = "soirée chill ou quoi ?";
            } else if (hours >= 22 || hours < 6) {
                timeComment = "va te coucher, sérieux.";
            }
            addResult(`chez toi, il est ${hours}h${minutes}. ${timeComment}`);

            // récupérer la connexion
            const connection = navigator.connection?.effectiveType || 'inconnue';
            let connectionComment = "ça fonctionne ?";
            if (connection === "wifi") {
                connectionComment = "wifi, classique.";
            } else if (connection === "4g" || connection === "3g") {
                connectionComment = `${connection}, en mode mobile.`;
            } else if (connection === "ethernet") {
                connectionComment = "ethernet, ça c'est pro.";
            }
            addResult(`et ta connexion ? ${connection}. ${connectionComment}`);
        }

        // charger les infos locales
        loadLocalInfo();
    </script>
</body>
</html>
