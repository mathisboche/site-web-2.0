<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Yo, t'es surveillé.</title>
</head>
<body>
    <h1>yo. t'es grillé.</h1>
    <p>j'ai trouvé ton ip <span id="ip"></span>. pas ouf de la laisser traîner comme ça, hein ?</p>
    <p>t'es peut-être à <span id="location"></span>. t'as reconnu ?</p>
    <p>tu utilises <span id="browser"></span> sur <span id="os"></span>. sérieux, t'aurais pu faire mieux.</p>
    <p>je vois que tu parles <span id="language"></span>. bonne langue, ou c'est google trad qui gère ?</p>
    <p>ton écran est genre <span id="resolution"></span>. ça passe, mais upgrade un peu quand même.</p>
    <p>chez toi, il est <span id="time"></span>. <span id="time-comment"></span></p>
    <p>et ta connexion ? <span id="connection"></span>. franchement, c'est correct ?</p>

    <script>
        // ip et localisation
        fetch('https://ipapi.co/json/')
            .then(res => res.json())
            .then(data => {
                document.getElementById('ip').textContent = data.ip || 'inconnue';
                const city = data.city || 'quelque part';
                const region = data.region || 'nulle part';
                const country = data.country_name || 'un autre monde';
                document.getElementById('location').textContent = `${city}, ${region}, ${country}`;
            })
            .catch(() => {
                document.getElementById('location').textContent = 'je sais pas où, mais pas ici.';
            });

        // navigateur et os
        const userAgent = navigator.userAgent;
        let browser = "inconnu", os = "inconnu";

        if (userAgent.includes("Chrome")) browser = "Chrome";
        else if (userAgent.includes("Firefox")) browser = "Firefox";
        else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
        else if (userAgent.includes("Edge")) browser = "Edge";
        else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";

        if (userAgent.includes("Windows")) os = "Windows";
        else if (userAgent.includes("Mac")) os = "macOS";
        else if (userAgent.includes("Linux")) os = "Linux";
        else if (userAgent.includes("Android")) os = "Android";
        else if (userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";

        document.getElementById('browser').textContent = browser;
        document.getElementById('os').textContent = os;

        // langue
        const lang = navigator.language || 'inconnue';
        const langMap = {
            "fr": "français",
            "en": "anglais",
            "es": "espagnol",
            "de": "allemand",
            "it": "italien",
            "zh": "chinois",
            "ja": "japonais",
            "ru": "russe",
            "ar": "arabe"
        };
        const shortLang = lang.split('-')[0];
        document.getElementById('language').textContent = langMap[shortLang] || 'une langue chelou';

        // résolution
        document.getElementById('resolution').textContent = window.screen.width + ' x ' + window.screen.height;

        // heure et commentaire
        function updateTimeAndComment() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('time').textContent = `${hours}h${minutes}`;

            let comment = "t'as un horaire chelou.";
            if (hours >= 6 && hours < 12) {
                comment = "matinal, hein ?";
            } else if (hours >= 12 && hours < 18) {
                comment = "l'après-midi, c'est chill ?";
            } else if (hours >= 18 && hours < 22) {
                comment = "soirée Netflix ou quoi ?";
            } else if (hours >= 22 || hours < 6) {
                comment = "trop tard pour être sur internet.";
            }
            document.getElementById('time-comment').textContent = comment;
        }
        updateTimeAndComment(); // appelle une fois au chargement
        setInterval(updateTimeAndComment, 60000); // met à jour toutes les minutes

        // connexion
        function detectConnection() {
            if (navigator.connection && navigator.connection.effectiveType) {
                const type = navigator.connection.effectiveType;
                let connComment = "mystérieuse";
                if (type === "wifi") {
                    connComment = "wifi, solide.";
                } else if (type === "4g" || type === "3g") {
                    connComment = `${type}, t'es sur ton tel ?`;
                } else if (type === "ethernet") {
                    connComment = "ethernet, la base.";
                } else {
                    connComment = "chelou, on sait pas trop.";
                }
                document.getElementById('connection').textContent = connComment;
            } else {
                document.getElementById('connection').textContent = "impossible à savoir. mystère.";
            }
        }
        detectConnection();
    </script>
</body>
</html>
